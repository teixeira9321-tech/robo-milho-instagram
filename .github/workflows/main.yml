name: Agendador do Robo

on:
  schedule:
    # Roda automaticamente a cada 2 horas
    - cron: '0 */2 * * *'
  workflow_dispatch: # Permite rodar manualmente para testes

jobs:
  rodar-robo:
    runs-on: ubuntu-latest
    steps:
      - name: Baixando o codigo do GitHub
        uses: actions/checkout@v3

      - name: Instalando o Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Instalando dependencias
        run: pip install instagrapi requests google-generativeai

      - name: Executando o motor do rob√¥
        env:
          # A PONTE DE DADOS: Conectando os Secrets ao Python
          INSTA_SESSION: ${{ secrets.INSTA_SESSION }}
          GEMINI_KEY: ${{ secrets.GEMINI_KEY }}
          INSTA_USER: ${{ secrets.INSTA_USER }}
          INSTA_PASS: ${{ secrets.INSTA_PASS }}
        run: python main.py
